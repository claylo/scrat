# scrat Configuration (TOML format)
#
# Copy this file to one of the following locations:
#   - .scrat.toml (in your project directory)
#   - scrat.toml (in your project directory)
#   - ~/.config/scrat/config.toml (user-wide config)
#
# Supported formats: TOML, YAML, JSON
# (use the appropriate extension: .toml, .yaml, .yml, .json)
#
# Configuration files are discovered automatically. Project-level configs
# take precedence over user-level configs. The search stops at repository
# boundaries (.git directories).

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------

# Minimum log level to display.
# Values: "debug", "info", "warn", "error"
# Default: "info"
# Can be overridden with --verbose (-v) or --quiet (-q) flags.
log_level = "info"

# Log files are written as JSONL with daily rotation.
# Default paths:
# - /var/log/scrat.jsonl (Unix, if writable)
# - ~/.local/share/scrat/logs/scrat.jsonl (fallback)
# Override with environment variables:
# - SCRAT_LOG_PATH=/path/to/scrat.jsonl
# - SCRAT_LOG_DIR=/path/to/log/dir
# - SCRAT_ENV=dev
# Config options:
# - log_dir = "/path/to/log/dir"
# - otel_endpoint = "http://127.0.0.1:4317"

# ------------------------------------------------------------------------------
# Project (auto-detected — override only when needed)
# ------------------------------------------------------------------------------

# [project]
# type = "rust"       # auto-detected from Cargo.toml / package.json
# release_branch = "main"  # auto-detected: main > master

# ------------------------------------------------------------------------------
# Version Strategy (auto-detected from cliff.toml / cog.toml)
# ------------------------------------------------------------------------------

# [version]
# strategy = "conventional-commits"  # "conventional-commits", "interactive", "explicit"

# ------------------------------------------------------------------------------
# Command Overrides (smart defaults per ecosystem)
# ------------------------------------------------------------------------------

# [commands]
# test = "cargo nextest run"     # Rust default (if nextest installed)
# build = "cargo build --release"
# publish = "cargo publish"
# clean = "cargo clean"

# ------------------------------------------------------------------------------
# Release Workflow
# ------------------------------------------------------------------------------

# [release]
# changelog_tool = "git-cliff"  # or "cog"
# github_release = true
# assets = ["release-card.png", "checksums.txt"]

# ------------------------------------------------------------------------------
# Hooks (pre/post commands per phase of `scrat ship`)
# ------------------------------------------------------------------------------
# Variables: {version}, {prev_version}, {tag}, {changelog_path}, {owner}, {repo}
#
# Commands run in parallel by default. Prefix with "sync:" to create a
# barrier — all prior commands finish, the sync command runs alone, then
# subsequent commands resume in parallel.
#
# Phase order:
#   pre_ship → test → bump → publish → git → release → post_ship

# [hooks]
# # Bracket the entire ship workflow
# pre_ship = ["echo 'Starting release...'"]
# post_ship = ["echo 'Release complete!'"]
#
# # Before/after test phase
# pre_test = ["echo 'Preparing tests...'"]
# post_test = ["echo 'Tests passed!'"]
#
# # Before/after version bump + changelog
# pre_bump = ["echo 'Pre-bump tasks...'"]
# post_bump = [
#     "ll-graphics generate --version {version} --output release-card.png",
# ]
#
# # Before/after publishing to registry
# pre_publish = ["cargo build --release"]
# post_publish = ["echo 'Published {version}!'"]
#
# # Before/after git commit + tag + push
# pre_tag = ["echo 'Preparing tag {tag}...'"]
# post_tag = ["echo 'Pushed {tag}'"]
#
# # Before/after GitHub release creation
# pre_release = ["sync:echo 'Creating release...'"]
# post_release = ["echo 'Released {owner}/{repo}@{tag}'"]
